(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[38],{1775:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var s=a(1),n=a(1349),i=a(32),r=a(1281),c=a(309),l=a(403),o=a(399),u=a(29),d=a(82),b=a(395),j=a(1297),m=a(3),x=a(12),O=a.n(x),h=a(20),p=a(162),v=a(230),f=a(1261),g=a(1291),y=a(614),S=a(1259),w=a(1289),k=a(1290),U=a(1715),P=a(198),C=a(1178),V=a(1250),W=a(21),F=a(1299),D=a(396),E=a(237),L=a(0);function z(e){var t=e.currentUser,a=e.userSpecialPermissions,s=e.parameterSettings,n=Object(i.h)(),r=Object(p.useSnackbar)().enqueueSnackbar,c=t?"user"!==t.role&&"s-user"!==t.role||!a?t.role:"s-user":"",l=(a&&a.max_coverage||s&&s.settings.default_coverage,Object(v.c)({enableReinitialize:!0,initialValues:{name:(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",password:"",role:c||"",phoneNumber:(null===t||void 0===t?void 0:t.phoneNumber)||"",address:(null===t||void 0===t?void 0:t.address)||"",country:(null===t||void 0===t?void 0:t.country)||"",state:(null===t||void 0===t?void 0:t.state)||"",city:(null===t||void 0===t?void 0:t.city)||"",zipCode:(null===t||void 0===t?void 0:t.zipCode)||"",avatarUrl:t&&"".concat(E.b.baseUrl,"/user/img-src/").concat(t.avatarUrl)||null,status:null===t||void 0===t?void 0:t.status,online:(null===t||void 0===t?void 0:t.online)||!1,onlineStatus:(null===t||void 0===t?void 0:t.online)?"online":"offline"},onSubmit:function(){var e=Object(h.a)(O.a.mark((function e(t,a){var s,i,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.setSubmitting,i=a.resetForm,c=a.setErrors,e.prev=1,e.next=4,Object(F.a)(500);case 4:return e.next=6,W.a.put("/user/manage-users?username=".concat(t.username),t);case 6:i(),s(!1),r("Update success",{variant:"success"}),n(u.b.user.list),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),s(!1),c(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()})),o=l.errors,d=l.values,b=l.touched,j=l.handleSubmit,x=l.setFieldValue,z=l.getFieldProps;return Object(L.jsx)(v.b,{value:l,children:Object(L.jsx)(v.a,{noValidate:!0,autoComplete:"off",onSubmit:j,children:Object(L.jsxs)(f.a,{container:!0,spacing:3,children:[Object(L.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(L.jsxs)(g.a,{sx:{py:10,px:3},children:[Object(L.jsx)(D.a,{color:"active"!==d.status?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:d.status}),Object(L.jsxs)(y.a,{sx:{mb:5},children:[Object(L.jsx)(S.a,{src:d.avatarUrl}),Object(L.jsx)(w.a,{error:!0,sx:{px:2,textAlign:"center"},children:b.avatarUrl&&o.avatarUrl})]}),Object(L.jsx)(k.a,{labelPlacement:"start",control:Object(L.jsx)(U.a,{disabled:!0,onChange:function(e){return x("status",e.target.checked?"banned":"active")},checked:"active"!==d.status}),label:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(P.a,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),Object(L.jsx)(P.a,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),Object(L.jsx)(k.a,{labelPlacement:"start",control:Object(L.jsx)(U.a,Object(m.a)(Object(m.a)({disabled:!0},z("isVerified")),{},{checked:d.isVerified})),label:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(P.a,{variant:"subtitle2",sx:{mb:.5},children:"Email Verified"}),Object(L.jsx)(P.a,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}})]})}),Object(L.jsx)(f.a,{item:!0,xs:12,md:8,children:Object(L.jsx)(g.a,{sx:{p:3},children:Object(L.jsxs)(C.a,{spacing:3,children:[Object(L.jsxs)(C.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(L.jsx)(V.a,Object(m.a)({disabled:!0,inputProps:{readOnly:!0},fullWidth:!0,label:"Email"},z("email"))),Object(L.jsx)(V.a,Object(m.a)({disabled:!0,inputProps:{readOnly:!0},fullWidth:!0,label:"Nickname"},z("name")))]}),Object(L.jsxs)(C.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(L.jsx)(V.a,Object(m.a)({disabled:!0,fullWidth:!0,label:"Role"},z("role"))),Object(L.jsx)(V.a,Object(m.a)({disabled:!0,fullWidth:!0,label:"Status"},z("onlineStatus")))]}),Object(L.jsx)(C.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(L.jsx)(V.a,Object(m.a)({disabled:!0,fullWidth:!0,label:"Registration Date"},z("created")))})]})})})]})})})}var N=a(1458);function R(){var e=Object(d.a)().themeStretch,t=Object(c.c)(),a=Object(i.i)().userId,m=Object(c.d)((function(e){return e.user})),x=m.userList,O=m.specialPermissionList,h=x.find((function(e){return Object(n.a)(e.id.toString())===a})),p=O.find((function(e){return Object(n.a)(e.userId)===a})),v=Object(c.d)((function(e){return e.setting})).settingsList.find((function(e){return"parameter"===e.type}));return Object(s.useEffect)((function(){t(Object(l.d)()),t(Object(l.c)()),t(Object(o.b)())}),[t]),Object(L.jsx)(b.a,{title:"User: Create a new user | Locals",children:Object(L.jsxs)(r.a,{maxWidth:!e&&"lg",children:[Object(L.jsx)(j.a,{heading:"User Details",links:[{name:"Dashboard",href:u.b.root},{name:"User",href:u.b.user.list},{name:"".concat(h&&h.name)}]}),Object(L.jsx)(z,{currentUser:h,userSpecialPermissions:p,parameterSettings:v}),p&&Object(L.jsx)(N.a,{readOnly:!0,currentUser:h,userSpecialPermissions:p})]})})}}}]);
//# sourceMappingURL=38.17df5970.chunk.js.map